{{ define "main" }}

<main class="flex flex-column items-center">
  <session class="w-100 mw8 mb0 cf">
    <h1 class="ml3 ml4-ns pt3">Hãy để tôi giúp bạn</h1>
      {{ range .Site.Data.homepage.helps }}
      <article class="w-100 w-third-l mb3 mb4-ns ph3 ph4-ns fl">
        <div class="aspect-ratio aspect-ratio--19x6 aspect-ratio--16x9-ns aspect-ratio--19x6-l dim overflow-hidden">
          <a class="flex items-center justify-center aspect-ratio--object cover link white hover-white"
            href="{{ .cta.url }}" style="background:url({{ .image }}) no-repeat center center">
            <span class="flex items-center justify-center w-100 h-100 bg-black-40 bg-animate pa2 fw3 f4 f3-ns">
              <span class="pa3 ba border-box bw1">{{ .cta.text }}</span>
            </span>
          </a>
        </div>
        <h2>{{ .title }}</h2>
        <p>{{ .subtitle | safeHTML }}<p>
      </article>
      {{ end }}
  </session>

  <div class="mw8 w-100 pl3 pl4-ns">
    <h1>Bài viết của Phương</h1>
    <!-- Ranges through content/posts/*.md -->
    <session class="grid w-100 db cf">
      <div class="grid-sizer w-100 w-50-ns"></div>
      {{ range where .Site.Pages "URL" "in" .Site.Data.homepage.selected_post_urls }}
      {{ partial "post/selected.html" . }}
      {{ end }}
    </session><!-- grid -->
    {{ partial "masonry_layout.html" . }}
  </div>
</main>

<script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

<script>
  if (window.netlifyIdentity) {
    window.netlifyIdentity.on("init", user => {
      if (!user) {
        window.netlifyIdentity.on("login", () => {
          document.location.href = "/admin/";
        });
      }
    });
  }
</script>

{{ end }}
